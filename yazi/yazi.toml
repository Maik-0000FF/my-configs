# ~/.config/yazi/yazi.toml
# Main configuration file for yazi file manager

# Define custom openers for different file types and actions
[opener]
# Text editor configuration - uses VelocityNvim
edit = [
  { run = 'NVIM_APPNAME=VelocityNvim nvim "$@"', block = true, for = "unix", desc = "Edit with VelocityNvim" },
]

# Default system opener - uses xdg-open (Linux) or open (macOS)
# orphan = true ensures the process runs in background and doesn't block yazi
open = [
  { run = 'xdg-open "$@"', orphan = true, desc = "Open", for = "linux" },
  { run = 'open "$@"', orphan = true, desc = "Open", for = "macos" },
]

# File opening rules
[open]
rules = [
  # Media files - open with system default (before text rules!)
  { mime = "image/*", use = "open" },
  { mime = "video/*", use = "open" },
  { mime = "audio/*", use = "open" },
  { mime = "application/pdf", use = "open" },

  # Text files
  { mime = "text/*", use = "edit" },
  { mime = "application/json", use = "edit" },
  { mime = "application/x-yaml", use = "edit" },
  { mime = "application/toml", use = "edit" },

  # Code files by extension
  { name = "*.js", use = "edit" },
  { name = "*.ts", use = "edit" },
  { name = "*.jsx", use = "edit" },
  { name = "*.tsx", use = "edit" },
  { name = "*.py", use = "edit" },
  { name = "*.rs", use = "edit" },
  { name = "*.go", use = "edit" },
  { name = "*.c", use = "edit" },
  { name = "*.cpp", use = "edit" },
  { name = "*.h", use = "edit" },
  { name = "*.sh", use = "edit" },
  { name = "*.lua", use = "edit" },
  { name = "*.vim", use = "edit" },
  { name = "*.css", use = "edit" },
  { name = "*.html", use = "edit" },
  { name = "*.xml", use = "edit" },

  # Fallback: use system opener for everything else
  { name = "*", use = "open" },
]

# Manager settings - configure file manager behavior
[mgr]
# Allow scrolling past the last file in the list
scroll_past_end = true
# Disable wrapping navigation (don't jump to top when reaching bottom)
wrap = false

# Preview settings
[preview]
# Maximum preview size for images (in pixels)
max_width = 1200
max_height = 1800

# Task settings for image decoding
[tasks]
# Maximum memory allocation for decoding a single image (0 = unlimited)
image_alloc = 536870912  # 512 MB
# Maximum image dimensions for decoding [width, height] (0 = unlimited)
image_bound = [0, 0]

